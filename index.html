<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Black Russia Exclusive</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;900&display=swap" rel="stylesheet">
</head>
<body>

    <div id="blur-container">
        <header>
            <div class="user-pill" onclick="openProfileModal()">
                <img id="header-avatar" src="https://via.placeholder.com/40" alt="Ava">
                <div class="user-text">
                    <span id="header-name">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                    <span class="uid-tag">UID: <span id="header-uid">...</span></span>
                </div>
            </div>
            <div class="balance-pill" onclick="switchTab('shop')">
                <span id="user-balance">0</span> ‚ÇΩ
                <div class="add-btn">+</div>
            </div>
        </header>

        <main>
            <div id="tab-cases" class="section active">
                <div class="hero-banner">
                    <h1>–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</h1>
                    <p>–û—Ç–∫—Ä—ã–≤–∞–π –∫–µ–π—Å—ã, –≤—ã–±–∏–≤–∞–π —ç–∫—Å–∫–ª—é–∑–∏–≤</p>
                </div>
                <div class="cases-grid" id="cases-container"></div>
            </div>

            <div id="tab-shop" class="section">
                <h2>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞</h2>
                <div class="promo-container" style="background: #1a1a1a; padding: 15px; border-radius: 12px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1);">
                    <div style="font-size: 12px; color: #888; margin-bottom: 8px;">–ï—Å—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥?</div>
                    <div style="display: flex; gap: 8px;">
                        <input type="text" id="promo-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥..." 
                               style="flex:1; background: #111; border: 1px solid #333; color: white; padding: 10px; border-radius: 8px; outline: none;">
                        <button onclick="activatePromo()" 
                                style="background: var(--gold); border: none; padding: 0 15px; border-radius: 8px; font-weight: bold; cursor: pointer;">
                            OK
                        </button>
                    </div>
                </div>
                <div class="shop-grid">
                    <div class="shop-card" onclick="initYooPayment(15)">
                        <div class="amount">15 ‚ÇΩ</div>
                        <div class="cost">–ù–∞—á–∞–ª—å–Ω—ã–π</div>
                    </div>
                    <div class="shop-card popular" onclick="initYooPayment(500)">
                        <div class="badge">HIT</div>
                        <div class="amount">500 ‚ÇΩ</div>
                        <div class="cost">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</div>
                    </div>
                    <div class="shop-card premium" onclick="initYooPayment(1000)">
                        <div class="badge">VIP</div>
                        <div class="amount">1000 ‚ÇΩ</div>
                        <div class="cost">–≠–ª–∏—Ç–Ω—ã–π</div>
                    </div>
                    <div class="shop-card" onclick="initYooPayment(5000)">
                        <div class="amount">5000 ‚ÇΩ</div>
                        <div class="cost">–ú–∞–≥–Ω–∞—Ç</div>
                    </div>
                </div>

                <div class="custom-pay-block">
                    <input type="number" id="custom-amount" class="custom-pay-input" placeholder="–°–≤–æ—è —Å—É–º–º–∞ (–æ—Ç 10‚ÇΩ)">
                    <button class="btn-pay-custom" onclick="payCustomAmount()">–û–ü–õ–ê–¢–ò–¢–¨</button>
                </div>

                <div class="payment-check">
                    <p id="payment-msg">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—É–º–º—É –¥–ª—è –æ–ø–ª–∞—Ç—ã</p>
                </div>
            </div>

            <div id="tab-inventory" class="section">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                    <h2 style="margin:0;">–ú–æ–π –ì–∞—Ä–∞–∂</h2>
                    <button id="btn-sell-all" class="btn-small-danger" onclick="sellAllItems()" style="display:none;">–ü–†–û–î–ê–¢–¨ –í–°–Å</button>
                </div>
                
                <div id="inventory-grid" class="inventory-grid"></div>
                <p id="empty-inventory" style="text-align:center; color:#666; display:none; margin-top:50px;">
                    –í –≥–∞—Ä–∞–∂–µ –ø—É—Å—Ç–æ...<br>
                    <span style="font-size:12px; opacity:0.7">–û—Ç–∫—Ä–æ–π—Ç–µ –∫–µ–π—Å, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∞–≤—Ç–æ</span>
                </p>
            </div>
        </main>
    </div> 

    <nav class="bottom-nav">
        <button class="nav-btn active" onclick="switchTab('cases')">
            <span class="icon">üì¶</span> 
            <span>–ö–µ–π—Å—ã</span>
        </button>
        <button class="nav-btn" onclick="switchTab('shop')">
            <span class="icon">üí≥</span> 
            <span>–ë–∞–ª–∞–Ω—Å</span>
        </button>
        <button class="nav-btn" onclick="switchTab('inventory')">
            <span class="icon">üöó</span> 
            <span>–ì–∞—Ä–∞–∂</span>
        </button>
    </nav>

    <div class="modal-overlay" id="modal-preview">
        <div class="modal-card slide-up" style="justify-content: flex-start; max-height: 85vh;">
            <button class="close-icon" onclick="closeModal('modal-preview')">‚úï</button>
            
            <div class="preview-header">
                <img id="preview-img" src="" class="preview-case-img">
                <h2 id="preview-title" style="margin: 5px 0 10px;">Case Name</h2>
                <div class="preview-price-tag" id="preview-price">500 ‚ÇΩ</div>
            </div>

            <div class="qty-selector">
                <button class="qty-btn active" onclick="setOpenCount(1)">x1</button>
                <button class="qty-btn" onclick="setOpenCount(2)">x2</button>
                <button class="qty-btn" onclick="setOpenCount(5)">x5</button>
                <button class="qty-btn" onclick="setOpenCount(10)">x10</button>
            </div>

            <div style="font-size: 12px; color: #888; margin-bottom: 5px; text-align: left; width: 100%;">–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–µ–π—Å–∞:</div>
            
            <div class="preview-grid-container">
                <div class="preview-grid" id="preview-items-container"></div>
            </div>

            <div class="preview-footer">
                <label class="fast-open-toggle">
                    <div class="switch">
                        <input type="checkbox" id="fast-open-check">
                        <span class="slider"></span>
                    </div>
                    <span>–ë—ã—Å—Ç—Ä–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ</span>
                </label>

                <button class="btn-main pulse-btn" id="btn-start-open" onclick="startRouletteSequence()">
                    –û–¢–ö–†–´–¢–¨ –ó–ê <span id="btn-total-price">0</span> ‚ÇΩ
                </button>
            </div>
        </div>
    </div>

    <div class="roulette-fullscreen" id="modal-roulette">
        <div id="roulette-playground" class="roulette-playground"></div>
        <div class="roulette-status" id="roulette-status">–ó–ê–ü–£–°–ö...</div>
    </div>

    <div class="modal-overlay" id="modal-win">
        <div class="modal-card pop-in" id="win-card" style="max-height: 90vh;">
            
            <div class="win-effects-container" id="win-effects">
                <div class="sunburst"></div>
                <div class="win-pulse"></div>
            </div>

            <h2 style="color: #FFD700; text-shadow: 0 0 10px orange; z-index: 2; position: relative; margin-top:0;">–ü–û–ó–î–†–ê–í–õ–Ø–ï–ú!</h2>
            
            <div id="win-grid" class="win-grid"></div>

            <div style="z-index: 2; position: relative; margin-top: 10px; font-size: 12px; color: #aaa;">
                –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: <span id="win-total-price" style="color:white; font-weight:bold;">0</span> ‚ÇΩ
            </div>
            
            <div class="win-actions" style="z-index: 2; position: relative;">
                <button class="btn-sec" onclick="finishWin(false)">–ü—Ä–æ–¥–∞—Ç—å –≤—Å—ë</button>
                <button class="btn-main" onclick="finishWin(true)">–í –≥–∞—Ä–∞–∂</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-inventory-action">
        <div class="modal-card pop-in">
            <button class="close-icon" onclick="closeModal('modal-inventory-action')">‚úï</button>
            <h3 style="margin-bottom: 5px;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–º</h3>
            
            <div id="inv-action-preview" style="margin: 20px 0;">
                <img id="inv-item-img" src="" style="width:100px; height:80px; object-fit:contain;">
                <h3 id="inv-item-name" style="margin: 10px 0 5px;">–ù–∞–∑–≤–∞–Ω–∏–µ</h3>
                <div style="color:#888; font-size:12px;">–ì–æ—Å. —Ü–µ–Ω–∞: <span id="inv-item-price">0</span> ‚ÇΩ</div>
            </div>

            <div class="win-actions" style="flex-direction: column; width: 100%;">
                <button class="btn-main" onclick="sellCurrentItem()">
                    –ü–†–û–î–ê–¢–¨ –ó–ê <span id="sell-btn-price">0</span> ‚ÇΩ
                </button>
                <button class="btn-sec" onclick="withdrawCurrentItem()">
                    –í–´–í–ï–°–¢–ò –í –ò–ì–†–£
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-profile">
        <div class="modal-card" style="max-height: 90vh;">
            <button class="close-icon" onclick="closeModal('modal-profile')">‚úï</button>
            <h3>–ü—Ä–æ—Ñ–∏–ª—å –ò–≥—Ä–æ–∫–∞</h3>
            <div class="stat-row"><span>–ò–º—è:</span> <span id="profile-id">Loading...</span></div>
            <div class="stat-row"><span>UID:</span> <span id="profile-uid" style="color:var(--c-rare)">...</span></div>
            <div class="stat-row"><span>–ë–∞–ª–∞–Ω—Å:</span> <span id="profile-bal" style="color: gold">0</span></div>
            
            <div style="margin-top: 15px; text-align: left;">
                <h4 style="color:#888; margin-bottom:10px; font-size:12px; text-transform:uppercase;">–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h4>
                <div id="history-list" class="history-list"></div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>