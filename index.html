<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#09090b">
    <meta name="description" content="Black Russia Cases - –û—Ç–∫—Ä–æ–π—Ç–µ –ª—É—á—à–∏–µ –∫–µ–π—Å—ã –∏ –≤—ã–∏–≥—Ä—ã–≤–∞–π—Ç–µ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã!">
    <title>‚≠ê Black Russia Cases - –û—Ç–∫—Ä–æ–π—Ç–µ –ö–µ–π—Å—ã</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
</head>
<body>

<!-- VPN Overlay -->
<div id="vpn-overlay" style="display:none; position:fixed; inset:0; background:#09090b; z-index:10001; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:20px;">
    <div style="font-size: 60px; margin-bottom: 20px; animation: float 3s ease-in-out infinite;">üåç</div>
    <h1 style="color:#FFD700; font-weight:900; margin-bottom:10px;">–¢–†–ï–ë–£–ï–¢–°–Ø VPN</h1>
    <p style="color:#ccc; font-size:16px; max-width:300px; margin-bottom:20px;">–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ï—Å–ª–∏ –≤—ã –∏–∑ –†–§, –≤–∫–ª—é—á–∏—Ç–µ VPN.</p>
    <button onclick="location.reload()" class="btn-primary" style="width: auto; padding: 10px 30px;">–ü–û–í–¢–û–†–ò–¢–¨</button>
</div>

<!-- Ban Overlay -->
<div id="ban-overlay" style="display:none; position:fixed; inset:0; background:#09090b; z-index:10000; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:20px;">
    <div style="font-size: 80px; margin-bottom: 20px;">üö´</div>
    <h1 style="color:#ff3333; font-weight:900; margin-bottom:10px;">–î–û–°–¢–£–ü –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù</h1>
    <p style="color:#ccc; font-size:16px; max-width:300px; margin-bottom:20px;">–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –±—ã–ª –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.</p>
</div>
    
    <!-- Background Glows -->
    <div class="bg-glow bg-glow-1"></div>
    <div class="bg-glow bg-glow-2"></div>

    <!-- Live Feed Strip -->
    <div class="live-feed-strip">
        <div class="live-feed-overlay"></div> 
        <div class="live-feed-track" id="live-feed-track"><div class="live-item-placeholder"><span class="loader-dot"></span> –ñ–¥–µ–º –¥—Ä–æ–ø—ã...</div></div>
        <div class="live-fade-left"></div>
        <div class="live-fade-right"></div>
    </div>

    <!-- Loading Screen -->
    <div id="loading-screen" style="position:fixed; inset:0; background:#09090b; z-index:9999; display:flex; align-items:center; justify-content:center; flex-direction:column;">
        <div class="loader-dot" style="width:20px; height:20px;"></div>
        <div style="margin-top:15px; color:#FFD700; font-weight:bold;">–ó–ê–ì–†–£–ó–ö–ê...</div>
    </div>

    <!-- Particle Container (for future effects) -->
    <div id="particle-container" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1;"></div>
    
    <div id="blur-container">
        <header>
            <div class="brand-box">
                <img src="img/logo.png" alt="Logo" class="brand-logo-img" onerror="this.src='https://placehold.co/100x100/1a1a1a/ffffff?text=BR'">
                <div class="brand-info">
                    <span class="brand-main">BLACK RUSSIA</span>
                    <span class="brand-sub">CASES</span>
                </div>
            </div>
            <div class="header-right">
                <div class="balance-glass" onclick="switchTab('shop')">
                    <span id="user-balance">0</span> ‚ÇΩ
                    <div class="btn-add-balance">+</div>
                </div>
                <div class="profile-btn" onclick="openProfileModal()">
                    <img id="header-avatar" src="img/avatar_placeholder.png" onerror="this.src='https://placehold.co/100x100/1a1a1a/ffffff?text=U'">
                </div>
            </div>
        </header>

        <main>
            <div id="tab-cases" class="section active">
                <div class="hero-section"><h1>Black Russia Cases</h1><p>–ò—Å–ø—ã—Ç–∞–π —É–¥–∞—á—É –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å</p></div>
                <div class="section-divider"><span>–ë–ï–°–ü–õ–ê–¢–ù–û</span></div><div class="cases-grid" id="cases-free"></div>
                <div class="section-divider"><span>–ö–ï–ô–°–´</span></div><div class="cases-grid" id="cases-default"></div>
                <div class="section-divider"><span>–ù–ê–ë–û–†–´</span></div><div class="cases-grid" id="cases-bundles"></div>
                <div class="section-divider"><span>–†–ò–°–ö</span></div><div class="cases-grid" id="cases-risk"></div>
                <div class="section-divider"><span>–ö–û–ù–¢–ï–ô–ù–ï–†–´</span></div><div class="cases-grid" id="containers"></div>
            </div>

            <div id="tab-games" class="section">
                <div class="hero-section small"><h1>–ú–∏–Ω–∏-–ò–≥—Ä—ã</h1><p>–†–∏—Å–∫—É–π –∏ –ø—Ä–∏—É–º–Ω–æ–∂–∞–π</p></div>
                
                <div class="games-hub-grid">
                    <div class="game-hub-card upgrade" onclick="switchTab('upgrade')">
                        <div class="gh-icon">‚öôÔ∏è</div>
                        <div class="gh-info">
                            <h3>–ê–ø–≥—Ä–µ–π–¥</h3>
                            <p>–£–ª—É—á—à–∏ –ø—Ä–µ–¥–º–µ—Ç –∏–ª–∏ –ø–æ—Ç–µ—Ä—è–π –µ–≥–æ</p>
                        </div>
                        <div class="gh-btn">–ò–ì–†–ê–¢–¨</div>
                    </div>
                    
                    <div class="game-hub-card contract" onclick="switchTab('contract')">
                        <div class="gh-icon">üìú</div>
                        <div class="gh-info">
                            <h3>–ö–æ–Ω—Ç—Ä–∞–∫—Ç</h3>
                            <p>–û–±–º–µ–Ω—è–π 5 –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –Ω–∞ 1 –∫—Ä—É—Ç–æ–π</p>
                        </div>
                        <div class="gh-btn">–ò–ì–†–ê–¢–¨</div>
                    </div>

                    <div class="game-hub-card top" onclick="switchTab('top')">
                        <div class="gh-icon">üèÜ</div>
                        <div class="gh-info">
                            <h3>–¢–æ–ø –ò–≥—Ä–æ–∫–æ–≤</h3>
                            <p>–†–µ–π—Ç–∏–Ω–≥ –±–æ–≥–∞—á–µ–π —Å–µ—Ä–≤–µ—Ä–∞</p>
                        </div>
                        <div class="gh-btn">–°–ú–û–¢–†–ï–¢–¨</div>
                    </div>
                </div>
            </div>

            <div id="tab-upgrade" class="section">
                <div class="back-nav" onclick="switchTab('games')">‚Äπ –ù–∞–∑–∞–¥ –∫ –∏–≥—Ä–∞–º</div>
                 <div class="hero-section small"><h1>–ê–ø–≥—Ä–µ–π–¥</h1><p>–ü–æ–≤—ã—à–∞–π —Å—Ç–∞–≤–∫–∏</p></div>
                <div class="upgrade-wrapper">
                    <div class="upgrade-slots-row">
                        <div class="upg-card glass-panel" id="upg-source-slot" onclick="openUpgradeSelector()">
                            <div class="upg-card-header">–¢–í–û–ô –ü–†–ï–î–ú–ï–¢</div>
                            <div class="upg-card-body"><div class="placeholder-icon">+</div><img id="upg-source-img" src="" style="display:none"><div id="upg-source-price" class="price-badge" style="display:none">0 ‚ÇΩ</div></div>
                        </div>
                        <div class="upg-arrow">‚ûú</div>
                        <div class="upg-card glass-panel target">
                            <div class="upg-card-header">–†–ï–ó–£–õ–¨–¢–ê–¢</div>
                            <div class="upg-card-body">
                                <div id="upg-target-placeholder" class="placeholder-icon" style="opacity:0.3">?</div>
                                <div id="upg-not-found" class="error-text" style="display:none">–ù–ï–¢ –î–†–û–ü–ê</div>
                                <div id="upg-target-content" style="display:none"><img id="upg-target-img" src=""><div id="upg-target-price" class="price-badge gold">0 ‚ÇΩ</div></div>
                            </div>
                        </div>
                    </div>
                    <div class="glass-panel controls-panel">
                        <div class="multipliers-grid"><button onclick="setUpgradeMultiplier(1.5)">x1.5</button><button onclick="setUpgradeMultiplier(2)">x2.0</button><button onclick="setUpgradeMultiplier(5)">x5.0</button><button onclick="setUpgradeMultiplier(10)">x10</button></div>
                        <div class="slider-wrapper"><div class="slider-labels"><span>–®–∞–Ω—Å</span><span id="upg-chance-display">50%</span></div><input type="range" id="upg-chance-slider" min="1" max="75" value="50" oninput="updateUpgradeCalculation()"></div>
                    </div>
                    <div class="roll-container glass-panel"><div class="roll-track-neon"><div class="roll-win-area" id="roll-win-zone" style="width: 50%;"></div><div class="roll-pointer" id="roll-pointer"></div></div></div>
                    <div id="upg-status-text" class="status-text"></div>
                    <button id="btn-do-upgrade" class="btn-primary big-btn" onclick="startUpgrade()" disabled>–£–õ–£–ß–®–ò–¢–¨</button>
                </div>
            </div>

            <div id="tab-contract" class="section">
                <div class="back-nav" onclick="switchTab('games')">‚Äπ –ù–∞–∑–∞–¥ –∫ –∏–≥—Ä–∞–º</div>
                <div class="hero-section small"><h1>–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã</h1><p>–û–±–º–µ–Ω—è–π –Ω–µ–Ω—É–∂–Ω–æ–µ</p></div>
                <div id="contract-stats" class="contract-stats glass-panel"><div>–í—ã–±—Ä–∞–Ω–æ: <span id="contract-count" class="gold-text">0</span></div><div>–°—É–º–º–∞: <span id="contract-sum" class="gold-text">0</span> ‚ÇΩ</div></div>
                <div id="contract-grid" class="inventory-grid"></div>
                <div id="contract-empty" class="empty-state" style="display:none;"><div class="empty-icon">üìÇ</div><p>–ü—É—Å—Ç–æ</p></div>
                <div class="contract-footer"><button id="btn-sign-contract" class="btn-primary big-btn" onclick="signContract()" disabled>–ü–û–î–ü–ò–°–ê–¢–¨ –ö–û–ù–¢–†–ê–ö–¢</button></div>
            </div>
            
            <div id="tab-top" class="section">
                <div class="back-nav" onclick="switchTab('games')">‚Äπ –ù–∞–∑–∞–¥ –∫ –∏–≥—Ä–∞–º</div>
                <div class="hero-section"><h1>–¢–æ–ø –ë–æ–≥–∞—á–µ–π</h1><p>–õ—É—á—à–∏–µ –ø–æ —Ç—Ä–∞—Ç–∞–º –≤ –∏–≥—Ä–µ</p></div>
                <div class="glass-panel" style="padding: 10px;"><div id="leaderboard-list">Loading...</div></div>
            </div>

            <div id="tab-shop" class="section">
                <div class="hero-section small"><h1>–ú–∞–≥–∞–∑–∏–Ω</h1><p>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –±–æ–Ω—É—Å—ã</p></div>
                <div class="glass-panel" style="padding: 20px; margin-bottom: 25px;">
                    <h3 style="margin-top:0; color:#FFD700;">üéü –ü—Ä–æ–º–æ–∫–æ–¥</h3>
                    <div class="promo-box-large"><input type="text" id="promo-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥"><button onclick="activatePromo()" id="btn-promo-act">–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨</button></div>
                </div>
                <div class="section-divider"><span>–ü–ê–ö–ï–¢–´ –ü–û–ü–û–õ–ù–ï–ù–ò–Ø</span></div>
                <div class="shop-grid">
                    <button class="shop-btn" onclick="buyPack(20, 'https://funpay.com/lots/offer?id=64312154')"><div class="sb-price">20 ‚ÇΩ</div><div class="sb-desc">–°—Ç–∞—Ä—Ç</div></button>
                    <button class="shop-btn" onclick="buyPack(50, 'https://funpay.com/lots/offer?id=64312011')"><div class="sb-price">50 ‚ÇΩ</div><div class="sb-desc">–ù–æ–≤–∏—á–æ–∫</div></button>
                    <button class="shop-btn popular" onclick="buyPack(100, 'https://funpay.com/lots/offer?id=64312367')"><div class="sb-badge">–•–ò–¢</div><div class="sb-price">100 ‚ÇΩ</div><div class="sb-desc">–ë–∞–∑–æ–≤—ã–π</div></button>
                    <button class="shop-btn" onclick="buyPack(200, 'https://funpay.com/lots/offer?id=64312491')"><div class="sb-price">200 ‚ÇΩ</div><div class="sb-desc">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</div></button>
                    <button class="shop-btn gold" onclick="buyPack(500, 'https://funpay.com/lots/offer?id=64312576')"><div class="sb-price">500 ‚ÇΩ</div><div class="sb-desc">–≠–ª–∏—Ç–∞</div></button>
                    <button class="shop-btn gold" onclick="buyPack(1000, 'https://funpay.com/lots/offer?id=64312701')"><div class="sb-price">1000 ‚ÇΩ</div><div class="sb-desc">–ú–∞–∂–æ—Ä</div></button>
                    <button class="shop-btn myth" onclick="buyPack(5000, 'https://funpay.com/lots/offer?id=64312833')"><div class="sb-price">5000 ‚ÇΩ</div><div class="sb-desc">–û–ª–∏–≥–∞—Ä—Ö</div></button>
                    <button class="shop-btn myth" onclick="buyPack(10000, 'https://funpay.com/lots/offer?id=64312922')"><div class="sb-price">10000 ‚ÇΩ</div><div class="sb-desc">–í–ª–∞–¥–µ–ª–µ—Ü</div></button>
                </div>
                <div class="glass-panel custom-pay-box"><div class="custom-pay-label">–ù—É–∂–Ω–∞ –¥—Ä—É–≥–∞—è —Å—É–º–º–∞?</div><button class="btn-primary" onclick="payCustomAmount()">–ö–£–ü–ò–¢–¨ –ù–ê FUNPAY</button></div>
            </div>

            <div id="tab-pass" class="section">
                <div class="hero-section small"><h1>Battle Pass</h1><p>–í—ã–ø–æ–ª–Ω—è–π –∑–∞–¥–∞–Ω–∏—è - –ø–æ–ª—É—á–∞–π –Ω–∞–≥—Ä–∞–¥—ã</p></div>
                
                <div class="bp-header glass-panel">
                    <div class="bp-level-info">
                        <div class="bp-lvl-badge" id="bp-current-level">1</div>
                        <div class="bp-exp-text">–£—Ä–æ–≤–µ–Ω—å <span id="bp-current-exp">0</span> / <span id="bp-need-exp">100</span> EXP</div>
                    </div>
                    <div class="bp-progress-bar"><div class="bp-progress-fill" id="bp-progress-fill" style="width: 0%;"></div></div>
                    <button id="btn-buy-premium" class="btn-primary bp-buy-btn" onclick="buyPremiumPass()">–ö–£–ü–ò–¢–¨ PREMIUM (249 ‚ÇΩ)</button>
                    <div id="bp-premium-active" class="bp-premium-active-badge" style="display:none;">PREMIUM –ê–ö–¢–ò–í–ï–ù üëë</div>
                    <div style="font-size:10px; color:#666; margin-top:5px; text-align:center;">–û–∫—É–ø–∞–µ–º–æ—Å—Ç—å Premium: x2.5 (–ø—Ä–µ–¥–º–µ—Ç–∞–º–∏)</div>
                </div>

                <div class="section-divider"><span>–ù–ê–ì–†–ê–î–´</span></div>
                <div class="bp-track-container" id="bp-track"></div>

                <div class="section-divider"><span>–ó–ê–î–ê–ù–ò–Ø</span></div>
                <div class="bp-tasks-list" id="bp-tasks"></div>
            </div>

            <div id="tab-inventory" class="section">
                <div class="inventory-header"><h2>–ì–∞—Ä–∞–∂</h2><button id="btn-sell-all" class="btn-danger-small" onclick="sellAllItems()">–ü—Ä–æ–¥–∞—Ç—å –≤—Å—ë</button></div>
                <div id="inventory-grid" class="inventory-grid"></div>
                <div id="empty-inventory" class="empty-state" style="display:none;"><div class="empty-icon">üöò</div><p>–í–∞—à –≥–∞—Ä–∞–∂ –ø—É—Å—Ç</p></div>
            </div>
        </main>
    </div>

    <!-- Floating Action Buttons -->
    <div id="fab-container" style="position:fixed; bottom:90px; right:20px; z-index:99; display:flex; flex-direction:column; gap:12px; pointer-events:none;">
        <button style="width:50px; height:50px; border-radius:50%; background:linear-gradient(135deg,#4CAF50,#1B5E20); border:none; color:#fff; font-size:24px; cursor:pointer; box-shadow:0 4px 12px rgba(0,0,0,0.3); pointer-events:auto; transition:all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 0 20px rgba(76,175,80,0.5)'" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.3)'" onclick="switchTab('pass'); createClickParticle(event.clientX, event.clientY)">üé´</button>
        <button style="width:50px; height:50px; border-radius:50%; background:linear-gradient(135deg,#FF9800,#FF6F00); border:none; color:#fff; font-size:24px; cursor:pointer; box-shadow:0 4px 12px rgba(0,0,0,0.3); pointer-events:auto; transition:all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 0 20px rgba(255,152,0,0.5)'" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.3)'" onclick="switchTab('shop'); createClickParticle(event.clientX, event.clientY)">üõçÔ∏è</button>
    </div> 

    <nav class="bottom-nav">
        <button class="nav-item" onclick="switchTab('shop')"><div class="nav-icon">üõí</div><span>–ú–∞–≥–∞–∑–∏–Ω</span></button>
        <button class="nav-item" onclick="switchTab('games')"><div class="nav-icon">üéÆ</div><span>–ò–≥—Ä—ã</span></button>
        <button class="nav-item main-action" onclick="switchTab('cases')"><div class="nav-icon">üì¶</div></button>
        <button class="nav-item" onclick="switchTab('pass')"><div class="nav-icon">üé´</div><span>Pass</span></button>
        <button class="nav-item" onclick="switchTab('inventory')"><div class="nav-icon">üöò</div><span>–ì–∞—Ä–∞–∂</span></button>
    </nav>

    <div class="modal-overlay" id="modal-payment-warning">
        <div class="modal-glass center-modal" style="text-align:center;">
            <div style="font-size: 40px; margin-bottom: 10px;">‚ö†Ô∏è</div>
            <h3 style="color:#FFD700; margin-top:0;">–ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï</h3>
            <p style="font-size:13px; color:#ccc;">–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –∑–∞–∫–∞–∑ –Ω–∞ —Å–∞–π—Ç–µ –æ–ø–ª–∞—Ç—ã.</p>
            <button id="btn-proceed-pay" class="btn-primary" style="margin-top:15px;">–Ø –ü–û–ù–Ø–õ, –û–ü–õ–ê–¢–ò–¢–¨</button>
            <button class="btn-secondary" style="margin-top:10px;" onclick="closeModal('modal-payment-warning')">–û–¢–ú–ï–ù–ê</button>
        </div>
    </div>

    <div class="modal-overlay" id="modal-premium-pass-confirm">
        <div class="modal-glass center-modal" style="text-align:center;">
            <div style="font-size: 50px; margin-bottom: 15px;">üìù</div>
            <h3 style="color:#FFD700; margin-top:0; font-size:20px;">–ù–ï –ó–ê–ë–£–î–¨</h3>
            <p style="font-size:16px; color:#fff; margin:15px 0; font-weight:600;">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</p>
            <p style="font-size:12px; color:#aaa; margin-bottom:20px;">–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –∑–∞–∫–∞–∑ –Ω–∞ —Å–∞–π—Ç–µ –æ–ø–ª–∞—Ç—ã.</p>
            <button id="btn-proceed-premium" class="btn-primary" style="margin-top:15px;">–Ø –ü–û–î–¢–í–ï–†–î–ò–õ, –û–ü–õ–ê–¢–ò–¢–¨</button>
            <button class="btn-secondary" style="margin-top:10px;" onclick="closeModal('modal-premium-pass-confirm')">–û–¢–ú–ï–ù–ê</button>
        </div>
    </div>

    <div class="modal-overlay" id="modal-preview">
        <div class="modal-glass slide-up">
            <button class="btn-close" onclick="closeModal('modal-preview')">‚úï</button>
            <div class="case-preview-top">
                <img id="preview-img" src="">
                <h2 id="preview-title">Case Name</h2>
                <div class="price-pill" id="preview-price">0 ‚ÇΩ</div>
            </div>
            <div id="sub-timer" class="sub-timer" style="display:none;"></div>
            <button id="btn-sub-check" class="btn-primary" style="display:none; margin-bottom:10px;" onclick="checkSubscriptionAction()">–ü–û–î–ü–ò–°–ê–¢–¨–°–Ø</button>
            <button id="btn-sub-verify" class="btn-primary" style="display:none; background:#4CAF50; margin-bottom:10px;" onclick="verifySubscriptionWithBackend()">–ü–†–û–í–ï–†–ò–¢–¨</button>
            <div class="qty-selector" id="qty-selector">
                <button class="qty-btn active" onclick="setOpenCount(1)">x1</button><button class="qty-btn" onclick="setOpenCount(2)">x2</button><button class="qty-btn" onclick="setOpenCount(5)">x5</button><button class="qty-btn" onclick="setOpenCount(10)">x10</button>
            </div>
            <div class="items-scroller" id="preview-items-container"></div>
            <div class="modal-footer-sticky">
                <label class="toggle-fast"><input type="checkbox" id="fast-open-check"><span class="toggle-track"></span><span>–ë—ã—Å—Ç—Ä–æ</span></label>
                <button id="btn-open-case" class="btn-primary big-btn" onclick="startRouletteSequence()">–û–¢–ö–†–´–¢–¨</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-inventory-action">
        <div class="modal-glass center-modal modern-item-modal">
            <button class="btn-close" onclick="closeModal('modal-inventory-action')" style="z-index: 20;">‚úï</button>
            <div class="modern-card-bg" id="inv-bg-glow"></div>
            <div class="inv-action-content">
                <div class="item-showcase"><img id="inv-item-img" src=""><div class="item-rarity-badge" id="inv-rarity-badge">LEGENDARY</div></div>
                <div class="item-info-block"><h3 id="inv-item-name">Item</h3><div class="price-tag-modern"><span id="inv-item-price">0</span> ‚ÇΩ</div></div>
                <div class="action-buttons-modern">
                    <button class="btn-sell-modern" onclick="sellCurrentItem()"><span>–ü–†–û–î–ê–¢–¨</span><span class="btn-subtext">+<span id="sell-btn-price">0</span> ‚ÇΩ</span></button>
                    <button class="btn-withdraw-modern" onclick="withdrawCurrentItem()"><span>–ó–ê–ë–†–ê–¢–¨</span><span class="btn-subtext">–í –ò–ì–†–£</span></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-upg-select"><div class="modal-glass center-modal full-height"><button class="btn-close" onclick="closeModal('modal-upg-select')">‚úï</button><h3>–í—ã–±–µ—Ä–∏ –ø—Ä–µ–¥–º–µ—Ç</h3><div class="upg-select-list" id="upg-select-grid"></div></div></div>

    <div class="modal-overlay" id="modal-profile">
        <div class="modal-glass center-modal">
            <button class="btn-close" onclick="closeModal('modal-profile')">‚úï</button>
            <div style="display:flex; align-items:center; gap:10px;"><h3>–ü—Ä–æ—Ñ–∏–ª—å</h3></div>
            <div class="profile-scroll-area">
                <div class="profile-stats"><div class="stat-line" style="display:flex; align-items:center;">ID: <span id="profile-uid" style="margin-right:5px;">...</span><span id="profile-verified-badge" class="insta-verified-badge large" style="display:none;"></span></div><div class="stat-line">–ë–∞–ª–∞–Ω—Å: <span id="profile-bal" class="gold-text">0</span></div></div>
                <div class="settings-form">
                    <div class="input-group"><label>–ù–∏–∫–Ω–µ–π–º</label><input type="text" id="setting-nick" placeholder="Ivan_Ivanov"></div>
                    <div class="input-group"><label>–°–µ—Ä–≤–µ—Ä</label>                       
                        <select id="setting-server">
                            <option value="Red">Red</option><option value="Green">Green</option><option value="Blue">Blue</option>
                            <option value="Yellow">Yellow</option><option value="Orange">Orange</option><option value="Purple">Purple</option>
                            <option value="Lime">Lime</option><option value="Pink">Pink</option><option value="Cherry">Cherry</option>
                            <option value="Black">Black</option><option value="Indigo">Indigo</option><option value="White">White</option>
                            <option value="Magenta">Magenta</option><option value="Crimson">Crimson</option><option value="Gold">Gold</option>
                            <option value="Azure">Azure</option><option value="Platinum">Platinum</option><option value="Aqua">Aqua</option>
                            <option value="Gray">Gray</option><option value="Ice">Ice</option><option value="Chilli">Chilli</option>
                            <option value="Choco">Choco</option><option value="Moscow">Moscow</option><option value="SPB">SPB</option>
                            <option value="Ufa">Ufa</option><option value="Sochi">Sochi</option><option value="Kazan">Kazan</option>
                            <option value="Samara">Samara</option><option value="Rostov">Rostov</option><option value="Anapa">Anapa</option>
                            <option value="EKB">EKB</option><option value="Krasnodar">Krasnodar</option><option value="Arzamas">Arzamas</option>
                            <option value="Novosib">Novosib</option><option value="Grozny">Grozny</option><option value="Saratov">Saratov</option>
                            <option value="Omsk">Omsk</option><option value="Irkutsk">Irkutsk</option><option value="Volgograd">Volgograd</option>
                            <option value="Voronezh">Voronezh</option><option value="Belgorod">Belgorod</option><option value="Makhachkala">Makhachkala</option>
                            <option value="Vladikavkaz">Vladikavkaz</option><option value="Vladivostok">Vladivostok</option><option value="Kaliningrad">Kaliningrad</option>
                            <option value="Chelyabinsk">Chelyabinsk</option><option value="Krasnoyarsk">Krasnoyarsk</option><option value="Cheboksary">Cheboksary</option>
                            <option value="Khabarovsk">Khabarovsk</option><option value="Perm">Perm</option><option value="Tula">Tula</option>
                            <option value="Ryazan">Ryazan</option><option value="Murmansk">Murmansk</option><option value="Penza">Penza</option>
                            <option value="Kursk">Kursk</option><option value="Arkhangelsk">Arkhangelsk</option><option value="Orenburg">Orenburg</option>
                            <option value="Kirov">Kirov</option><option value="Kemerovo">Kemerovo</option><option value="Tyumen">Tyumen</option>
                            <option value="Tolyatti">Tolyatti</option><option value="Ivanovo">Ivanovo</option><option value="Stavropol">Stavropol</option>
                            <option value="Smolensk">Smolensk</option><option value="Pskov">Pskov</option><option value="Bryansk">Bryansk</option>
                            <option value="Orel">Orel</option><option value="Yaroslavl">Yaroslavl</option><option value="Barnaul">Barnaul</option>
                            <option value="Lipetsk">Lipetsk</option><option value="Ulyanovsk">Ulyanovsk</option><option value="Yakutsk">Yakutsk</option>
                            <option value="Tambov">Tambov</option><option value="Bratsk">Bratsk</option><option value="Astrakhan">Astrakhan</option>
                            <option value="Chita">Chita</option><option value="Kostroma">Kostroma</option><option value="Vladimir">Vladimir</option>
                            <option value="Kaluga">Kaluga</option><option value="Novgorod">Novgorod</option><option value="Taganrog">Taganrog</option>
                            <option value="Vologda">Vologda</option><option value="Tver">Tver</option><option value="Tomsk">Tomsk</option>
                            <option value="Izhevsk">Izhevsk</option><option value="Surgut">Surgut</option><option value="Podolsk">Podolsk</option>
                            <option value="Magadan">Magadan</option><option value="Cherepovets">Cherepovets</option><option value="Norilsk">Norilsk</option>
                        </select></div>
                    <div class="input-group"><label>–°—á–µ—Ç</label><input type="number" id="setting-bank" placeholder="0000"></div>
                    <button class="btn-primary" style="margin-top:10px;" onclick="saveSettings()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
                <div class="section-divider"><span>–†–ï–§–ï–†–ê–õ–ö–ê</span></div>
                <div class="ref-card glass-panel">
                    <div class="ref-header">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</div><div class="ref-balance"><span id="ref-earn-display">0</span> ‚ÇΩ</div>
                    <div class="ref-stats-row"><div class="ref-stat"><div class="rs-val" id="ref-count-display">0</div><div class="rs-label">–î—Ä—É–∑–µ–π</div></div><div class="ref-stat"><div class="rs-val">10 ‚ÇΩ</div><div class="rs-label">–ó–∞ –¥—Ä—É–≥–∞</div></div></div>
                </div>
                <button class="btn-secondary" onclick="copyRefLink()" style="margin-top:10px;">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
                <div class="history-block" style="margin-top:20px;"><h4>–ò—Å—Ç–æ—Ä–∏—è</h4><div class="history-scroll-container"><div id="history-list"></div></div></div>
            </div>
        </div>
    </div>
    
    <div class="modal-overlay" id="modal-other-profile">
        <div class="modal-glass center-modal">
            <button class="btn-close" onclick="closeModal('modal-other-profile')">‚úï</button>
            <div style="text-align:center; margin-bottom:15px;">
                <img id="other-avatar" src="" style="width:60px; height:60px; border-radius:50%; margin-bottom:10px;">
                <h3 style="margin:0; display:flex; align-items:center; justify-content:center;"><span id="other-name">User</span><span id="other-verified" class="insta-verified-badge large" style="display:none;"></span></h3>
                <div id="other-server" style="color:#666; font-size:12px; margin-top: 5px;">Server: Red</div>
            </div>
            <div class="profile-scroll-area"><div id="other-inventory-grid" class="inventory-grid"></div><div id="other-inventory-empty" class="empty-state" style="display:none;"><p>–ü—É—Å—Ç–æ</p></div></div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-win"><div class="modal-glass center-modal win-modal" id="win-modal-content"><div class="win-light" id="win-light-bg"></div><h2 class="win-title">–ü–û–ë–ï–î–ê!</h2><div id="win-grid" class="win-grid"></div><div class="win-sum">–°—É–º–º–∞: <span id="win-total-price">0</span> ‚ÇΩ</div><div class="win-actions"><button class="btn-secondary" onclick="finishWin(false)">–ü—Ä–æ–¥–∞—Ç—å</button><button class="btn-primary" onclick="finishWin(true)">–í –≥–∞—Ä–∞–∂</button></div></div></div>

    <div class="roulette-overlay" id="modal-roulette"><div class="roulette-status">–û–¢–ö–†–´–í–ê–ï–ú...</div><div id="roulette-strips-container" class="roulette-strips-container"></div></div>
    <div id="notify-area"></div>
    <div class="contract-anim-overlay" id="contract-anim-overlay"><div class="contract-vortex" id="contract-vortex"></div></div>
    <div class="container-anim-overlay" id="container-anim-overlay"><div class="container-box" id="container-box"><div class="container-lock"></div><div class="container-door c-door-left"></div><div class="container-door c-door-right"></div><div class="container-inner-light"></div><img id="container-reveal-img" class="container-item-reveal" src=""></div></div>

    <script src="script.js"></script>
</body>
</html>