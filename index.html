<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Black Russia Cases</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
</head>
<body>

    <div class="bg-glow bg-glow-1"></div>
    <div class="bg-glow bg-glow-2"></div>

    <div id="blur-container">
        <header>
            <div class="brand-box">
                <img src="https://i.imgur.com/7vK0TSM.png" alt="Logo" class="brand-logo-img">
                <div class="brand-info">
                    <span class="brand-main">BLACK RUSSIA</span>
                    <span class="brand-sub">CASES</span>
                </div>
            </div>

            <div class="header-right">
                <div class="balance-glass" onclick="switchTab('shop')">
                    <span id="user-balance">0</span> ‚ÇΩ
                    <div class="btn-add-balance">+</div>
                </div>
                
                <div class="profile-btn" onclick="openProfileModal()">
                    <img id="header-avatar" src="https://via.placeholder.com/40" alt="Profile">
                </div>
            </div>

            <span id="header-name" style="display:none;"></span>
            <span id="header-uid" style="display:none;"></span>
        </header>

        <main>
            <div id="tab-cases" class="section active">
                <div class="hero-section">
                    <h1>Black Russia Cases</h1>
                    <p>–ì–æ—Ç–æ–≤ –ø–æ–¥–Ω—è—Ç—å –±–∞–ª–∏–∫?</p>
                </div>

                <div class="section-divider"><span>–ì–õ–ê–í–ù–û–ï</span></div>
                <div class="cases-grid" id="cases-default"></div>

                <div class="section-divider"><span>–ù–ê–ë–û–†–´</span></div>
                <div class="cases-grid" id="cases-bundles"></div>

                <div class="section-divider"><span>–†–ò–°–ö</span></div>
                <div class="cases-grid" id="cases-risk"></div>

                <div class="info-card warning">
                    <div class="info-icon">‚ö†Ô∏è</div>
                    <div class="info-text">
                        –í—ã–≤–æ–¥ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –≤ –≤–∏—Ä—Ç–∞—Ö.<br>
                        <b>–ö—É—Ä—Å: 1‚ÇΩ = 10,000 –í–∏—Ä—Ç</b>
                    </div>
                </div>
            </div>

            <div id="tab-upgrade" class="section">
                <div class="hero-section small">
                    <h1>–ê–ø–≥—Ä–µ–π–¥</h1>
                    <p>–ü–æ–≤—ã—à–∞–π —Å—Ç–∞–≤–∫–∏</p>
                </div>

                <div class="upgrade-wrapper">
                    <div class="upgrade-slots-row">
                        <div class="upg-card glass-panel" id="upg-source-slot" onclick="openUpgradeSelector()">
                            <div class="upg-card-header">–¢–í–û–ô –ü–†–ï–î–ú–ï–¢</div>
                            <div class="upg-card-body">
                                <div class="placeholder-icon">+</div>
                                <img id="upg-source-img" src="" style="display:none">
                                <div id="upg-source-price" class="price-badge" style="display:none">0 ‚ÇΩ</div>
                            </div>
                        </div>

                        <div class="upg-arrow">
                            <svg viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>
                        </div>

                        <div class="upg-card glass-panel target">
                            <div class="upg-card-header">–†–ï–ó–£–õ–¨–¢–ê–¢</div>
                            <div class="upg-card-body">
                                <div id="upg-target-placeholder" class="placeholder-icon" style="opacity:0.3">?</div>
                                <div id="upg-not-found" class="error-text" style="display:none">–ù–ï–¢ –î–†–û–ü–ê</div>
                                
                                <div id="upg-target-content" style="display:none">
                                    <img id="upg-target-img" src="">
                                    <div id="upg-target-price" class="price-badge gold">0 ‚ÇΩ</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-panel controls-panel">
                        <div class="multipliers-grid">
                            <button onclick="setUpgradeMultiplier(1.5)">x1.5</button>
                            <button onclick="setUpgradeMultiplier(2)">x2.0</button>
                            <button onclick="setUpgradeMultiplier(5)">x5.0</button>
                            <button onclick="setUpgradeMultiplier(10)">x10</button>
                        </div>
                        
                        <div class="slider-wrapper">
                            <div class="slider-labels">
                                <span>–®–∞–Ω—Å</span>
                                <span id="upg-chance-display">50%</span>
                            </div>
                            <input type="range" id="upg-chance-slider" min="1" max="75" value="50" oninput="updateUpgradeCalculation()">
                        </div>
                    </div>

                    <div class="roll-container glass-panel">
                        <div class="roll-track-neon">
                            <div class="roll-win-area" id="roll-win-zone" style="width: 50%;"></div>
                            <div class="roll-pointer" id="roll-pointer"></div>
                            <div class="roll-lines">
                                <i></i><i></i><i></i><i></i><i></i>
                            </div>
                        </div>
                    </div>

                    <div id="upg-status-text" class="status-text"></div>

                    <button id="btn-do-upgrade" class="btn-primary big-btn" onclick="startUpgrade()" disabled>
                        <span>–£–õ–£–ß–®–ò–¢–¨</span>
                        <div class="btn-glow"></div>
                    </button>
                </div>
            </div>

            <div id="tab-shop" class="section">
                <div class="hero-section small">
                    <h1>–ú–∞–≥–∞–∑–∏–Ω</h1>
                    <p>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞</p>
                </div>
                
                <div class="promo-box glass-panel">
                    <input type="text" id="promo-input" placeholder="–ü—Ä–æ–º–æ–∫–æ–¥">
                    <button onclick="activatePromo()">‚Üí</button>
                </div>

                <div class="shop-grid">
                    <div class="shop-item glass-panel" onclick="initYooPayment(15)">
                        <div class="shop-val">50 ‚ÇΩ</div>
                        <div class="shop-desc">–ù–∞—á–∏–Ω–∞—é—â–∏–π</div>
                    </div>
                    <div class="shop-item glass-panel hit" onclick="initYooPayment(500)">
                        <div class="badge-hit">HIT</div>
                        <div class="shop-val">500 ‚ÇΩ</div>
                        <div class="shop-desc">–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</div>
                    </div>
                    <div class="shop-item glass-panel gold" onclick="initYooPayment(1000)">
                        <div class="shop-val">1000 ‚ÇΩ</div>
                        <div class="shop-desc">–û–±—ã—á–Ω—ã–π</div>
                    </div>
                    <div class="shop-item glass-panel" onclick="initYooPayment(5000)">
                        <div class="shop-val">5000 ‚ÇΩ</div>
                        <div class="shop-desc">–≠–ª–∏—Ç–Ω—ã–π</div>
                    </div>
                </div>

                <div class="custom-pay glass-panel">
                    <input type="number" id="custom-amount" placeholder="–î—Ä—É–≥–∞—è —Å—É–º–º–∞... (–º–∏–Ω. 10 —Ä—É–±)">
                    <button onclick="payCustomAmount()">–û–ø–ª–∞—Ç–∏—Ç—å</button>
                </div>

                <div id="payment-status-box" class="payment-status-box" style="display:none;">
                    <div class="payment-loader"></div>
                    <div class="payment-info">
                        <span class="p-title">–û–∂–∏–¥–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã...</span>
                        <span class="p-desc">–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –¥–ª—è –æ–ø–ª–∞—Ç—ã</span>
                    </div>
                </div>
            </div>

            <div id="tab-inventory" class="section">
                <div class="inventory-header">
                    <h2>–ì–∞—Ä–∞–∂</h2>
                    <button id="btn-sell-all" class="btn-danger-small" onclick="sellAllItems()" style="display:none;">–ü—Ä–æ–¥–∞—Ç—å –≤—Å—ë</button>
                </div>
                
                <div id="inventory-grid" class="inventory-grid"></div>
                
                <div id="empty-inventory" class="empty-state" style="display:none;">
                    <div class="empty-icon">üìÇ</div>
                    <p>–ó–¥–µ—Å—å –ø–æ–∫–∞ –ø—É—Å—Ç–æ</p>
                    <span>–û—Ç–∫—Ä—ã–≤–∞–π –∫–µ–π—Å—ã, —á—Ç–æ–±—ã –ø–æ–ø–æ–ª–Ω–∏—Ç—å –≥–∞—Ä–∞–∂</span>
                </div>
            </div>
        </main>
    </div> 

    <nav class="glass-nav">
        <button class="nav-item active" onclick="switchTab('cases')">
            <div class="nav-icon">üì¶</div>
            <span>–ö–µ–π—Å—ã</span>
        </button>
        <button class="nav-item" onclick="switchTab('upgrade')">
            <div class="nav-icon">‚ö°Ô∏è</div>
            <span>–ê–ø–≥—Ä–µ–π–¥</span>
        </button>
        <button class="nav-item" onclick="switchTab('shop')">
            <div class="nav-icon">üí≥</div>
            <span>–ë–∞–ª–∞–Ω—Å</span>
        </button>
        <button class="nav-item" onclick="switchTab('inventory')">
            <div class="nav-icon">üöò</div>
            <span>–ì–∞—Ä–∞–∂</span>
        </button>
    </nav>

    <div class="modal-overlay" id="modal-preview">
        <div class="modal-glass slide-up">
            <button class="btn-close" onclick="closeModal('modal-preview')">‚úï</button>
            <div class="case-preview-top">
                <img id="preview-img" src="">
                <h2 id="preview-title">Case Name</h2>
                <div class="price-pill" id="preview-price">0 ‚ÇΩ</div>
            </div>
            <div class="qty-selector">
                <button class="qty-btn active" onclick="setOpenCount(1)">x1</button>
                <button class="qty-btn" onclick="setOpenCount(2)">x2</button>
                <button class="qty-btn" onclick="setOpenCount(5)">x5</button>
                <button class="qty-btn" onclick="setOpenCount(10)">x10</button>
            </div>
            <div class="items-scroller-title">–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:</div>
            <div class="items-scroller" id="preview-items-container"></div>
            <div class="modal-footer-sticky">
                <label class="toggle-fast">
                    <input type="checkbox" id="fast-open-check">
                    <span class="toggle-track"></span>
                    <span>–ë—ã—Å—Ç—Ä–æ</span>
                </label>
                <button class="btn-primary big-btn" onclick="startRouletteSequence()">
                    –û–¢–ö–†–´–¢–¨ –ó–ê <span id="btn-total-price">0</span> ‚ÇΩ
                </button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-inventory-action">
        <div class="modal-glass center-modal modern-item-modal">
            <button class="btn-close" onclick="closeModal('modal-inventory-action')" style="z-index: 20;">‚úï</button>
            <div class="modern-card-bg" id="inv-bg-glow"></div>
            <div class="inv-action-content">
                <div class="item-showcase">
                    <img id="inv-item-img" src="">
                    <div class="item-rarity-badge" id="inv-rarity-badge">LEGENDARY</div>
                </div>
                <div class="item-info-block">
                    <h3 id="inv-item-name">Item Name</h3>
                    <div class="price-tag-modern"><span id="inv-item-price">0</span> ‚ÇΩ</div>
                </div>
                <div class="item-stats-row">
                    <div class="stat-box"><div class="stat-label">–í –ò–ì–†–£</div><div class="stat-value" id="inv-item-virt-price">0 –í–∏—Ä—Ç</div></div>
                    <div class="stat-box"><div class="stat-label">–ò–ó–ù–û–°</div><div class="stat-value">Factory New</div></div>
                </div>
                <div class="action-buttons-modern">
                    <button class="btn-sell-modern" onclick="sellCurrentItem()"><span>–ü–†–û–î–ê–¢–¨</span><span class="btn-subtext">+<span id="sell-btn-price">0</span> ‚ÇΩ</span></button>
                    <button class="btn-withdraw-modern" onclick="withdrawCurrentItem()"><span>–ó–ê–ë–†–ê–¢–¨</span><span class="btn-subtext">–í –ò–ì–†–£</span></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-upg-select">
        <div class="modal-glass center-modal full-height">
            <button class="btn-close" onclick="closeModal('modal-upg-select')">‚úï</button>
            <h3>–í—ã–±–µ—Ä–∏ –ø—Ä–µ–¥–º–µ—Ç</h3>
            <div class="upg-select-list" id="upg-select-grid"></div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-profile">
        <div class="modal-glass center-modal">
            <button class="btn-close" onclick="closeModal('modal-profile')">‚úï</button>
            <h3>–ü—Ä–æ—Ñ–∏–ª—å</h3>
            <div class="profile-scroll-area">
                <div class="settings-form">
                    <div class="input-group"><label>–ù–∏–∫–Ω–µ–π–º</label><input type="text" id="setting-nick" placeholder="Ivan_Ivanov"></div>
                    <div class="row-group">
                        <div class="input-group"><label>–°–µ—Ä–≤–µ—Ä</label><select id="setting-server">
                                <option value="Red">Red</option><option value="Green">Green</option><option value="Blue">Blue</option>
                                <option value="Yellow">Yellow</option><option value="Orange">Orange</option><option value="Purple">Purple</option>
                                <option value="Lime">Lime</option><option value="Pink">Pink</option><option value="Cherry">Cherry</option>
                                <option value="Black">Black</option><option value="Indigo">Indigo</option><option value="White">White</option>
                        </select></div>
                        <div class="input-group"><label>–°—á–µ—Ç</label><input type="number" id="setting-bank" placeholder="0000"></div>
                    </div>
                    <button class="btn-primary" onclick="saveSettings()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
                <div class="profile-stats"><div class="stat-line"><span>ID:</span> <span id="profile-uid">...</span></div><div class="stat-line"><span>–ë–∞–ª–∞–Ω—Å:</span> <span id="profile-bal" class="gold-text">0</span></div></div>
                <div class="history-block"><h4>–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h4><div class="history-scroll-container"><div id="history-list"></div></div></div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-win">
        <div class="modal-glass center-modal win-modal" id="win-modal-content">
            <div class="win-light" id="win-light-bg"></div>
            <h2 class="win-title">–ü–û–ë–ï–î–ê!</h2>
            <div id="win-grid" class="win-grid"></div>
            <div class="win-sum">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: <span id="win-total-price">0</span> ‚ÇΩ</div>
            <div class="win-actions">
                <button class="btn-secondary" onclick="finishWin(false)">–ü—Ä–æ–¥–∞—Ç—å</button>
                <button class="btn-primary" onclick="finishWin(true)">–í –≥–∞—Ä–∞–∂</button>
            </div>
        </div>
    </div>
    
    <div class="modal-overlay" id="modal-withdraw-success">
        <div class="modal-glass center-modal small-modal">
            <div class="icon-success" style="font-size:40px; color:#4CAF50; text-align:center;">‚úî</div>
            <h3 style="text-align:center;">–ì–æ—Ç–æ–≤–æ</h3>
            <p id="withdraw-success-msg" style="text-align:center; color:#ccc; font-size:13px; margin:10px 0;">–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞</p>
            <button class="btn-primary" onclick="closeModal('modal-withdraw-success')">OK</button>
        </div>
    </div>

    <div class="roulette-overlay" id="modal-roulette">
        <div class="roulette-status" id="roulette-status">–û–¢–ö–†–´–í–ê–ï–ú...</div>
        <div id="roulette-strips-container" class="roulette-strips-container"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>